<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Map</title>


    <!-- Mapbox CSS -->

    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet'/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
          integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- Custom CSS -->
    <style>
        *{
            margin: 0;
            padding: 0;
            text-align: center;
            line-height: .75em;
        }

        #map {
            /* the width and height may be set to any size */
            display: flex;
            width: 100%;
            height: 400px;
        }
        #output{
            display: flex;
            list-style-type: none;
            justify-content: space-around;
            /*width: 30%;*/
        }

        .popUpBox {
            color: red;
            font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;

        }

        .card-title {
            display: flex;
            justify-items: center;
            justify-content: center;
            height: 50px;

            background-color: #3B94D9;
            color: white;
            font-size: large;
            border: 5px solid #3B94D9;
        }

    </style>
</head>
<body>
<!--header-->
<h1 class="d-flex justify-content-center">Weather or Not</h1>

<!-- The HTML element that serves as the DarkSky container -->
<ul id="output">
    <li>
        <div id="todayWeather"></div>
    </li>
    <li>
        <div id="tmrwWeather"></div>
    </li>
    <li>
        <div id="dayAfterWeather"></div>
    </li>
</ul>

<!-- The HTML element that serves as the Mapbox container -->
<div id='map'></div>


<!-- Mapbox JS -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<!--<script src="js/jquery-2.2.4.js"></script>-->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
<script src="js/mapbox-geocoder-utils.js"></script>
<script src="js/keys.js"></script>


<!-- Custom JS -->
<script>
    var arr = [
        {name: "<p>Codeup</p>", address: "600 Navarro St, San Antonio, TX 78205"}

    ];
    var icons = [
        {
            summary: "clear-day",
            image: 'icons/clearDay.png'
        },
        {
            summary: "clear-night",
            image: 'icons/clearNight.png'
        },
        {
            summary: "rain",
            image: 'icons/SVG/Cloud-Rain.svg'
        },
        {
            summary: "snow",
            image: 'icons/snow.png'
        },
        {
            summary: "sleet",
            image: 'icons/sleet.png'
        },
        {
            summary: "wind",
            image: 'icons/wind.png'
        },
        {
            summary: "fog",
            image: 'icons/fog.png'
        },
        {
            summary: "cloudy",
            image: 'icons/cloudy.png'
        },
        {
            summary: "partly-cloudy-day",
            image: 'icons/partlyCloudyDay.png'
        },
        {
            summary: "partly-cloudy-night",
            image: 'icons/partlyCloudyNight.png'
        }
    ];


    mapboxgl.accessToken = mapboxToken;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/dark-v9',
        zoom: 8,
        center: [-98.4861, 29.426]
    });

    var popupOptions = {
        className: "popUpBox"
    };

    arr.forEach(function (element) {
        var results = "results";
        geocode(element.address, mapboxToken).then(function (result) {
            var popup = new mapboxgl.Popup(popupOptions)
                .setHTML(element.name);

            new mapboxgl.Marker()
                .setLngLat(result)
                .setPopup(popup)
                .addTo(map);
        })
    });

    // Add zoom and rotation controls to the map.
    map.addControl(new mapboxgl.NavigationControl());

    // var layerList = document.getElementById('menu');
    // var inputs = layerList.getElementsByTagName('input');
    // for (var i = 0; i < inputs.length; i++) {
    //     inputs[i].onclick = switchLayer;
    // }
    // function switchLayer(layer) {
    //     var layerId = layer.target.id;
    //     map.setStyle('mapbox://styles/mapbox/' + layerId);
    //
    // }
    var date = function (input) {
        return new Date(input + 1000);
    };


    var darkSky = $.get("https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/" + darkSkyKey + "/29.4241,-98.4936");


    darkSky.done(function (data) {
        console.log(data.daily.data[0]); //SA info for today
        console.log(data.daily.data[1]); //SA info for today
        console.log(data.daily.data[2]); //SA info for today

            var todaySummary = data.daily.data[0].summary;
            var todayTempHi = parseInt(data.daily.data[0].temperatureHigh);
            var todayTempLo = parseInt(data.daily.data[0].temperatureLow);
            var todayHumidity = data.daily.data[0].humidity;
            var todayWind = data.daily.data[0].windSpeed;
            var todayPressure = data.daily.data[0].pressure;
            var tmrwSummary = data.daily.data[1].summary;
            var tmrwTempHi = data.daily.data[1].temperatureHigh;
            var tmrwTempLo = data.daily.data[1].temperatureLow;
            var tmrwHumidity = data.daily.data[1].humidity;
            var tmrwWind = data.daily.data[1].windSpeed;
            var tmrwPressure = data.daily.data[1].pressure;
            var dayAfterSummary = data.daily.data[2].summary;
            var dayAfterTempHi = data.daily.data[2].temperatureHigh;
            var dayAfterTempLo = data.daily.data[2].temperatureLow;
            var dayAfterHumidity = data.daily.data[2].humidity;
            var dayAfterWind = data.daily.data[2].windSpeed;
            var dayAfterPressure = data.daily.data[2].pressure;

            var weatherCard = " ";
            weatherCard += '<div class="card d-flex">';
            weatherCard += '<div class="card-title">' + "Date" + "</div>";
            weatherCard += '<div class="card-body">';
            weatherCard += '<img class="icon1">';
            weatherCard += '<hr> <h5>';
            weatherCard += 'High: ' + todayTempHi + '°F/';
            weatherCard += 'Low: ' + todayTempLo + '°F/';
            weatherCard += '<p>' + todaySummary + '</p>';
            weatherCard += '<p> Humidity: ' + todayHumidity + '%</p>';
            weatherCard += '<p> Wind Speed ' + todayWind + '</p>';
            weatherCard += '<p> Pressure: ' + todayPressure + '</p>';
            $("#todayWeather").append(weatherCard);

            var weatherCardTwo = " ";
            weatherCardTwo += '<div class="card d-flex">';
            weatherCardTwo += '<div class="card-title">' + "Date" + "</div>";
            weatherCardTwo += '<div class="card-body">';
            weatherCardTwo += '<img class="icon2">';
            weatherCardTwo += '<hr> <h5>';
            weatherCardTwo += 'High: ' + tmrwTempHi + '°F/';
            weatherCardTwo += 'Low: ' + tmrwTempLo + '°F/';
            weatherCardTwo += '<p>' + tmrwSummary + '</p>';
            weatherCardTwo += '<p> Humidity: ' + tmrwHumidity + '%</p>';
            weatherCardTwo += '<p> Wind Speed ' + tmrwWind + '</p>';
            weatherCardTwo += '<p> Pressure: ' + tmrwPressure + '</p>';
            $("#tmrwWeather").append(weatherCardTwo);

            var weatherCardThree = " ";
            weatherCardThree += '<div class="card d-flex">';
            weatherCardThree += '<div class="card-title">' + "Date" + "</div>";
            weatherCardThree += '<div class="card-body">';
            weatherCardThree += '<img class="icon3">';
            weatherCardThree += '<hr> <h5>';
            weatherCardThree += 'High: ' + dayAfterTempHi + '°F/';
            weatherCardThree += 'Low: ' + dayAfterTempLo + '°F/';
            weatherCardThree += '<p>' + dayAfterSummary + '</p>';
            weatherCardThree += '<p> Humidity: ' + dayAfterHumidity + '%</p>';
            weatherCardThree += '<p> Wind Speed ' + dayAfterWind + '</p>';
            weatherCardThree += '<p> Pressure: ' + dayAfterPressure + '</p>';
            $("#tmrwWeather").append(weatherCardThree);

            icons.forEach(function (type) {
                if (data.currently.icon === type.summary) {
                    $('.icon1').attr('src', type.image);
                }
            });
            icons.forEach(function (type) {
                if (data.daily.data[1].icon === type.summary) {
                    $('.icon2').attr('src', type.image);
                }
            });
            icons.forEach(function (type) {
                if (data.daily.data[2].icon === type.summary) {
                    $('.icon3').attr('src', type.image);
                }
            });
        });



</script>
</body>
</html>

<!--//alamo lat: 29.426 lon: -98.4861-->
<!--//dark sky api - simpler. use for predictions-->
<!--//use climacon for weather icons-->
<!--//var darkSkyKey-->
<!--$.get("https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/" + darkSkyKey + "/29.4241,-98.4936");-->